#xorshift random number generator
#see Marsaglia, George (July 2003). "Xorshift RNGs". Journal of Statistical Software Vol. 8 (Issue  14), or the wikipedia page for xorshift
#puts a semirandom unsigned int into t8
get_random_uint_in_t8:
lw $t0, 0($s8)

#t is $t8
lw $t1, 12($t0) #w
lw $t2, 8($t0)  #x 
lw $t3, 4($t0)  #y
lw $t4, 0($t0)  #z

sll  $t8, $t2, 11  #t = x<<11
xor  $t8, $t8, $t2 #t = t^x
addi $t2, $t3, 0   #x = y
addi $t3, $t4, 0   #y = z
addi $t4, $t1, 0   #z = w
srl  $t5, $t8, 8   #t>>8
xor  $t8, $t8, $t5 #t=^(t>>8)
srl  $t5, $t1, 19  #w>>19
xor  $t8, $t8, $t5 #t=t^(w>>19)
xor  $t8, $t8, $t1 #t=t^w
j $ra

#xorshift's seed
xorshift_seed_function:
addi $a0, $zero, 16 #sizeof(uint)*4
li $v0, 9
syscall

sw $v0, 0($s8) #record the locations of w,x,y,z

la $a0, seeding_random_number_generator_prompt
li $v0, 4
syscall

#for i = 4; i>0; i--
addi $t0, $zero, 4

xorshift_seed_loop:

#read a number
la $a0, enter_a_number_prompt
li $v0, 4
syscall
li $v0, 5

#i--
addi $t0, $zero, -1

#store
sw $v0, 0($t0)

#branch if less than 0
bltz $t0, xorshift_seed_loop
j $ra


promptEntrance:
		.asciiz "The last thing you remember, you were standing on the street and looking at the abandoned mansion on top of the hill. Then there was a blinding flash, and you now find yourself standing in the most spacious entry way you have ever seen. A six foot tall crystal chandelier hangs from the ceiling, and several sculptures stand atop pedestals around the room. Two grand staircases, each about six feet wide, wind their way up to the second floor. You see doors to your left and right, as well as one directly ahead of you between the two staircases. The double doors leading into the house loom behind you, and as you start towards them, you hear a lock snap shut. You hear a horrible wailing coming from the balcony above.\n" 
promptEntranceChoice1:
		.asciiz "To enter the parlor, type 1.\n"
promptEntranceChoice2:
		.asciiz "To enter the Dining Room, type 2.\n"
promptEntranceChoice3:
		.asciiz "To go upstairs, type 3.\n"
promptDining:
		.asciiz "As you enter the dining room, you are taken aback by what you see. Although this house is supposedly abandoned, there is a veritable feast laid before you on the massive table in the center of the room. Dozens of dishes are present, and each one looks more delicious than the last. In the center of the table is a massive turkey. While all of the places look as if they have just been set, a single chair has been pulled away from the table, as if it were expecting someone to sit down at any moment...\n"
promptDiningChoice1:
		.asciiz "To sit down at the chair, enter 1.\n"
promptDiningChoice2:
		.asciiz "To eat some of the food, type 2.\n"
promptDiningChoice3:
		.asciiz "To return to the entrance hall, type 3.\n"
promptChairDeath:
		.asciiz "You approach the table and sit in the offered chair. As you do, figures appear in the other chairs. It seems you are the guest of honor at this dinner, and they have been waiting for your arrival. As you reach over and accept an offered glass of wine, you exchange niceties with the assembled guests. You make a joke, and they erupt into raucous laughter. You are having such a good time that you fail to notice that you have stopped breathing. It's a good thing you are enjoying yourself, as you will be attending this dinner for eternity...END\n"
promptEatSomething:
		.asciiz "You reach down and pick up a roll from the table, and take a bite. As soon as you do, you feel the soft bread turn to ash in your mouth. You decide it's probably best not to try anything else. With one last glance back, you exit the room.\n"
promptLeaveDining1:
		.asciiz "To enter the parlor, type 1.\n"
promptLeaveDining2:
		.asciiz "To go upstairs, type 2.\n"
promptParlor:
		.asciiz "Before you opened the door, you could hear the faint sounds of a television coming from the room beyond. As you enter, you see the television on the other side of the room, playing a black and white movie that you've never seen before. You notice that the TV is not plugged into the wall outlet. The rocking chair that sits facing the screen has its back to you, but you can see that it is distinctly rocking back and forth.\n"
promptParlorChoice1:
		.asciiz "To investigate the rocking chair, type 1.\n"
promptParlorChoice2:
		.asciiz "To get out of here as fast as you possibly can, enter 2.\n"
promptChair:
		.asciiz "You approach the chair, and you get just close enough to see bones on the armrest before the seated figure rises. A decrepit skeleton slowly lifts itself from its seat and faces you. There is a short pause, followed swiftly by a scream so loud the light fixtures around the room shake. The fleshless being slowly advances toward you.\n"
promptChairChoice1:
		.asciiz "To attack the skeleton, enter 1.\n"
promptChairChoice2:
		.asciiz "To run away, enter 2.\n"
promptAttack:
		.asciiz "You ready yourself against the skeleton's attack, but you see now that it seems to be having a very hard time moving. You cautiosly approach and, feeling bolder, give the skeleton a light shove. It falls to the floor in a heap, loose bones scattering in all directions. As you congratulate yourself on your victory, you notice a glint of metal coming from inside the skull atop the pile at your feet. You reach in a grasp a key. You slide it into your pocket, hoping it will be of use later. You try the main doors, and when the key fails to open them, you decide to try the second floor.\n"
promptRunUpstairs:
		.asciiz "You dash through the entrance hall and up the staircase, all the while realizing that, while the wailing coming from above seems to be getting louder, it is coming from the third floor. You emerge onto a balcony that traveles along the edges of the high cieling of the entrance hall. You can see a staircase leading up, as well as doorways that open into what looks like a bathrom, playroom and child's room.\n"
promptBathroom:
		.asciiz "You open the door, and as a wave a nausea rolls over you, you empty your stomach onto the floor. Blood has been splashed everywhere, so much that it has completely covered the bathtub at the end of the room. Vile epithets are scratched into the walls, many of which are cursing someone named James. Some of the slashes in the wall appear to be leaking even more blood into the room.\n"
promptBathroomLeave:
		.asciiz "You know you need to leave or you will be sick again. To go to the child's room, enter 1. To go to the playroom, type 2. To travel upstairs, enter 3.\n"
promptChildRoom:
		.asciiz "You carefully push open the door and are greeted with the sight of a bed covered in stuffed animals. The room looks as if no one has been in it for years, but as you look down you notice that there is a stuffed rabbit at your feet.\n"
promptChildChoice1:
		.asciiz "To take the rabbit with you, enter 1.\n"
promptChildChoice2:
		.asciiz "To let it lie there, type 2.\n"
promptChildLeave1:
		.asciiz "To enter the playroom, enter 1.\n"
promptChildLeave2:
		.asciiz "To go upstairs, type 2.\n"
promptPlayroom:
		.asciiz "Following the sound of quiet sobbing, you open the door. Inside you see a little girl, sitting at a small table and clutching a teddy bear. She appears to be crying, but it is impossible to tell, as you can see right through her. She notices you standing there and says, "Hello. Will you play with me? No one wants to play with me any more.\n"
promptNoToy:
		.asciiz "Before you can react, you see the room start to grow, and feel your body stiffening. After several seconds, your limp form lies on the ground, button eyes staring blankly ahead. The last guest has arrived, and the tea party can begin...END\n"
promptToy:
		.asciiz "She spies the stuffed rabbit you have and giggles. You entertain the ghost girl by sitting down for a tea party with the rabbit. After a few minutes of playtime, she asks you if you've seen her mommy around. "Mommy got really mad one night, and she hurt me and my brother. I know she's sorry, and I want to play with her more, but she won't come down. Could you ask her to?" She hands you her teddy bear and continues playing with the rabbit. You set off up the stairs in an attempt to find her mother.\n"
prompt3rdFloor:
		.asciiz "As you climb the stairs to the third level of the house, the screaming and shrieking you have been hearing intensifies. You see a closed door in front of you, as well as what looks like a guest room. The master bedroom looms at the end of the hallway.\n"
prompt3rdChoice1:
		.asciiz "To go to the closed door, enter 1.\n"
prompt3rdChoice2:
		.asciiz "To go to the guest room, enter 2.\n"
prompt3rdChoice3:
		.asciiz "To enter the master bedroom, type 3.\n"
promptLockedNoKey:
		.asciiz "You walk up to the door and try to open it, only to find that it will not budge. You attempt to force the door open, and your struggles mask the sound of a shambling coming from down the corridor. You give up on the door just in time to see a large monster standing before you. You have just enough time to scream before you are devoured...END\n"
promptLockedKey:
		.asciiz "The door does not open on the first try, but then you notice that the key you picked up earlier matches the lock. You carefully slide the key into the lock and turn it. Instantly, the door swings open, and you gasp at what is revealed. Inside, sitting upon a pedastal, is a Proton Pack as well as a ghost trap. Smiling, you heft the contraption onto your back, and continue your exploration of the house.\n"
promptGuestRoom:
		.asciiz "The door opens easily, and you find yourself looking at the ghost of a tall, beautiful blonde woman. She turns to face you, and a look of pure terror crosses her face. Suddenly, she is hurled backward against the wall. She shakily gets to her feet. Before your eyes, you see the figure lifted and thrown across the room through a broken window. Her echoing scream trails off as her form fades. As you look back at the table she she was seated at, you find an intricately crafted mirror.\n"
promptGuestChoice1:
		.asciiz "To pick up the mirror, press 1.\n"
promptGuestChoice2:
		.asciiz "To leave the mirror behind, press 2.\n"
promptMasterBedroom:
		.asciiz "As you enter the Master Bedroom, the door slams shut behind you. You can hear the the lock engage, a terrible chill fills the air and a wind picks up from everywhere at once. An apparition materializes in front of you and the color drains from your face. Seven feet tall, with eyes and hair of the deepest black, She turns to you and, with a voice filled with the wailing of the damned, asks, "Who dares enter my home? Why should I spare your pathetic life?\n"
promptMirror:
		.asciiz "You dare bring that object to me!?" the spirit yells, full of rage. She points at you, and you can feel yourself becoming chilled to the bone. You also get the sense that you are growing smaller and smaller. The mirror drops to the floor, and you look out into the room from the glass of your new, eternal prison.\n"
promptProton:
		.asciiz "You point the proton gun you are carrying at the geist, and her screams become more panicked. The stream of protons undulates wildly, but the spirit is getting visibly weaker. You slide the trap beneath her, and her screams dwindle to nothing as she becomes trapped forever. Smiling you make your way out of the house and out into the street, and you don't even look back as the building fades into nothingness.\n"
promptTeddyBear:
		.asciiz "You take out little girl's teddy bear and show it to the spirit. You explain to her that her children want her to stop scaring them. The spirit slowly approaches you, and takes the bear from your hand. Instantly, she starts shrinking until she is the size of a normal human. "Thank you," she whispers, "for I have forgotten my children. I hope that they can forgive me." With that the spirit disappears, and the cries that have been filling the house cease. You suddenly feel very lightheaded, and before you realize what's happening, you fall to the floor unconscious. You awaken on the sidewalk where you were standing earlier. As you look back at the mansion, you can see that there are no longer any lights on, and it looks as though the house has not been lived in for years.\n"
promptAttack:
		.asciiz "You take a wild swing at the spirit, and your hand passes harmlessly through her spectral form. What did you think would happen if you tried to attack a ghost? The last thing you see as the spirit tears you apart is your own limbs being thrown across the room.\n"